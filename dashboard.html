 {% extends "base.html" %}

{% block title %}Dashboard - Sistema de Horários{% endblock %}
{% block page_title %}Dashboard & Gerador de Horários{% endblock %}

{% block content %}
<div class="card-grid">
    <div class="card">
        <h2>1. Importar Dados (Opcional)</h2>
        <p class="card-subtitle">Use esta seção para popular o banco de dados rapidamente a partir de arquivos. Os dados existentes no sistema serão substituídos.</p>
        <form id="uploadForm" action="{{ url_for('upload_e_processar') }}" method="POST" enctype="multipart/form-data">
            <div class="file-input-wrapper">
                <label for="arquivoDisponibilidade">Arquivo de Disponibilidade:</label>
                <input type="file" id="arquivoDisponibilidade" name="arquivoDisponibilidade" accept=".csv,.xlsx" required>
            </div>
            <div class="file-input-wrapper">
                <label for="arquivoQuadroAulas">Arquivo com Quadro de Aulas:</label>
                <input type="file" id="arquivoQuadroAulas" name="arquivoQuadroAulas" accept=".csv,.xlsx" required>
            </div>
            <button type="submit" class="btn-principal"><i data-feather="upload"></i> Importar e Substituir Dados</button>
        </form>
    </div>

    <div class="card">
        <h2>2. Gerar Horário</h2>
        <p class="card-subtitle">Use os dados presentes no sistema (importados ou gerenciados manualmente) para gerar as melhores opções de horário.</p>
        <button id="btnGerarHorario" class="btn-secundario"><i data-feather="cpu"></i> Gerar 10 Melhores Opções</button>
    </div>
</div>

<div id="status" class="status-message" style="display: none;"></div>

<div class="card result-card" id="resultadoContainer" style="display: none;">
    <div class="resultado-header">
        <h2>3. Resultado</h2>
        <div class="seletor-wrapper">
            <label for="seletorOpcoes">Visualizar Opção:</label>
            <select id="seletorOpcoes"></select>
        </div>
    </div>
    <div id="horarioContainer" class="table-wrapper"></div>
    <div id="diagnosticoContainer">
        <h3>Aulas Não Alocadas nesta Opção:</h3>
        <ul id="listaNaoAlocadas"></ul>
    </div>
</div>
{% endblock %}